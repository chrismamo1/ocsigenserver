=Module <<a_api_type | module Ocsigen_http_frame >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Ocsigen_http_frame>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Ocsigen_http_frame >><<span class="ocsforge_color_keyword"|end>>>><<span class="odocwiki_inlinecode"|compute~_new~_ri~_cookies now path ri~_cookies cookies~_to~_set>>
   adds the cookies from <<span class="odocwiki_inlinecode"|cookies~_to~_set>>
   to <<span class="odocwiki_inlinecode"|ri~_cookies>>~, as if the cookies
   had been send to the browser and the browser
   was doing a new request to the url <<span class="odocwiki_inlinecode"|path>>~.
   ~Only the cookies that match <<span class="odocwiki_inlinecode"|path>> ~(current path~) are added~.

----
<<pre class="ocsforge_color odocwiki_code" id="TYPEetag"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|etag>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|string>> >><<pre id="VALcompute_new_ri_cookies" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|compute~_new~_ri~_cookies>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  float <<span class="ocsforge_color_delimiter"| -> >>\\  string list <<span class="ocsforge_color_delimiter"| -> >>\\  string <<span class="ocsforge_color_uid"|Ocsigen_lib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|String>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Table>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Ocsigen_cookies.cookie" | type Ocsigen_cookies.cookie >> <<span class="ocsforge_color_uid"|Ocsigen_lib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|String>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Table>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>\\  <<span class="ocsforge_color_uid"|Ocsigen_cookies>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Cookies>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_uid"|Ocsigen_lib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|String>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Table>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|compute~_new~_ri~_cookies now path ri~_cookies cookies~_to~_set>>
   adds the cookies from <<span class="odocwiki_inlinecode"|cookies~_to~_set>>
   to <<span class="odocwiki_inlinecode"|ri~_cookies>>~, as if the cookies
   had been send to the browser and the browser
   was doing a new request to the url <<span class="odocwiki_inlinecode"|path>>~.
   ~Only the cookies that match <<span class="odocwiki_inlinecode"|path>> ~(current path~) are added~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEresult"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|result>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_cookies:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_cookies.cookieset" | type Ocsigen_cookies.cookieset >>>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|cookies to set>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_lastmodified:>> <<span class="odocwiki_type"|float option>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Default~: <<span class="odocwiki_inlinecode"|~None>>>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_etag:>> <<span class="odocwiki_type"|<<a_api text="etag" | type Ocsigen_http_frame.etag >> option>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_code:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~H~T~T~P code~, if not ~2~0~0>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_stream:>> <<span class="odocwiki_type"|\\    string <<a_api text="Ocsigen_stream.t" | type Ocsigen_stream.t >> *\\    <<span class="ocsforge_color_delimiter"| ( >>string <<a_api text="Ocsigen_stream.t" | type Ocsigen_stream.t >> <<span class="ocsforge_color_delimiter"| -> >>\\     int64 <<span class="ocsforge_color_delimiter"| -> >> string <<a_api text="Ocsigen_stream.step" | type Ocsigen_stream.step >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>><<span class="ocsforge_color_delimiter"| ) >>\\    option>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Default~: empty stream~. 
           ~The second field is ~(optionaly~)
           the function used to skip a part of the 
           stream~, if you do not you want to use
           a basic reading of the stream~. 
           ~For example~, for static files~, you can optimize it by using
           a <<span class="odocwiki_inlinecode"|seek>> function~.>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_content_length:>> <<span class="odocwiki_type"|int64 option>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<span class="odocwiki_inlinecode"|~None>> means ~Transfer~-encoding~: chunked>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_content_type:>> <<span class="odocwiki_type"|string option>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_headers:>> <<span class="odocwiki_type"|<<a_api text="Http_headers.t" | type Http_headers.t >>>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~The headers you want to add>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_charset:>> <<span class="odocwiki_type"|string option>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Default~: ~None>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|res_location:>> <<span class="odocwiki_type"|string option>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|~Default~: ~None>><<span class="odocwiki_comments_close"| ~*)>>>>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~The type of answers to send
>>
<<pre id="VALdefault_result" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|default~_result>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="result" | type Ocsigen_http_frame.result >>>>>><<div class="odocwiki_info"|~Default <<span class="odocwiki_inlinecode"|result>> to use as a base for constructing others~.
>>
<<pre id="VALempty_result" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|empty~_result>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="result" | type Ocsigen_http_frame.result >>>>>><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|result>> for an empty page~.
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module type>> <<a_api text="HTTP_CONTENT" | module type Ocsigen_http_frame.HTTP_CONTENT >> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module type Ocsigen_http_frame.HTTP_CONTENT >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Http_header" | module Ocsigen_http_frame.Http_header >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Ocsigen_http_frame.Http_header >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Http_error" | module Ocsigen_http_frame.Http_error >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Ocsigen_http_frame.Http_error >><<span class="ocsforge_color_keyword"|end>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEt"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|t>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|frame_header:>> <<span class="odocwiki_type"|<<a_api text="Http_header.http_header" | type Ocsigen_http_frame.Http_header.http_header >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|frame_content:>> <<span class="odocwiki_type"|string <<a_api text="Ocsigen_stream.t" | type Ocsigen_stream.t >> option>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|frame_abort:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~The type of ~H~T~T~P frames~.
   ~The content may be void ~(no body~) or a stream~.
   ~While sending~, a stream will be sent with chunked encoding if no
   content~-length is supplied~.
   abort is the function to be called if you want to cancel the stream
   reading ~(closes the connection~)~.
>>
