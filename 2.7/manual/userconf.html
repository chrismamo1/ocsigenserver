<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Userconf</title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script><script src="/js/client.js"></script></head><body class="ocsigenserver 2.7 userconf"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href="/" class="ocsimore_phrasing_link"><img src="/img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Server
</p><ul class="mainmenu"><li class="mainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="mainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li><a href="/lwt/4.1.0/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.3.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li></ul><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-current drawermainmenu-project"><a href="/ocsigenserver/2.9/manual/quickstart" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href="/lwt/4.1.0/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href="/tyxml/4.3.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href="/ocsigen-toolkit/1.1.0/manual/intro" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-page"><a href="/projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href="/papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href="/credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href="/blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="/ocsigenserver/2.7/manual/quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="/ocsigenserver/2.7/manual/launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="/ocsigenserver/2.7/manual/config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="/ocsigenserver/2.7/manual/misc" class="ocsimore_phrasing_link">Misc</a></h3><h2>Extensions</h2><h3><a href="/ocsigenserver/2.7/manual/staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="/ocsigenserver/2.7/manual/eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="/ocsigenserver/2.7/manual/extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="/ocsigenserver/2.7/manual/accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="/ocsigenserver/2.7/manual/authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="/ocsigenserver/2.7/manual/cgimod" class="ocsimore_phrasing_link">CGImod</a></h3><h3><a href="/ocsigenserver/2.7/manual/deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="/ocsigenserver/2.7/manual/redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="/ocsigenserver/2.7/manual/revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="/ocsigenserver/2.7/manual/rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="/ocsigenserver/2.7/manual/outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="/ocsigenserver/2.7/manual/userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="/ocsigenserver/2.7/manual/comet" class="ocsimore_phrasing_link">Comet</a></h3><h3><a href="/ocsigenserver/2.7/manual/cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3>Developing with the Ocsigen framework</h3><h4><a href="/ocsigenserver/2.7/manual/lwtoc" class="ocsimore_phrasing_link">Cooperative threads</a></h4><h4><a href="/ocsigenserver/2.7/manual/staticlink" class="ocsimore_phrasing_link">Static linking of the Ocsigen server</a></h4><h3><a href="/ocsigenserver/2.7/manual/extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h3><a href="/ocsigenserver/2.7/manual/libraries" class="ocsimore_phrasing_link">Libraries</a></h3><h3><a href="/ocsigenserver/2.7/manual/wrapping" class="ocsimore_phrasing_link">specific wrapping</a></h3><h1>Ocsigen server - API reference</h1><h2>Persistent data, writing in the logs, configuration file extension, polymorphic tables</h2><h3><a href="/ocsigenserver/2.7/api/Ocsigen_lib" class="ocsimore_phrasing_link">Ocsigen_lib</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h3><h3><a href="/ocsigenserver/2.7/api/Polytables" class="ocsimore_phrasing_link">Polytables</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_cache" class="ocsimore_phrasing_link">Ocsigen_cache</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsipersist" class="ocsimore_phrasing_link">Ocsipersist</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_config" class="ocsimore_phrasing_link">Ocsigen_config</a></h3><h2>Extending Ocsigen Server</h2><h3><a href="/ocsigenserver/2.7/api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_local_files" class="ocsimore_phrasing_link">Ocsigen_local_files</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_headers" class="ocsimore_phrasing_link">Ocsigen_headers</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_senders" class="ocsimore_phrasing_link">Ocsigen_senders</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_http_frame" class="ocsimore_phrasing_link">Ocsigen_http_frame</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_http_client" class="ocsimore_phrasing_link">Ocsigen_http_client</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_http_com" class="ocsimore_phrasing_link">Ocsigen_http_com</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_stream" class="ocsimore_phrasing_link">Ocsigen_stream</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_comet" class="ocsimore_phrasing_link">Ocsigen_comet</a></h3><h3><a href="/ocsigenserver/2.7/api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h2>Indexes</h2><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_types">Index of types</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_values">Index of values</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_methods">Index of class methods</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_classes">Index of classes</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_modules">Index of modules</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_module_types">Index of module types</a></span></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value="/ocsigenserver/dev/manual/userconf">dev</option><option value="/ocsigenserver/2.9/manual/userconf">2.9</option><option value="/ocsigenserver/2.8/manual/userconf">2.8</option><option selected="selected">2.7</option><option value="/ocsigenserver/2.6/manual/userconf">2.6</option><option value="/ocsigenserver/2.5/manual/userconf">2.5</option><option value="/ocsigenserver/2.3/manual/userconf">2.3</option><option value="/ocsigenserver/2.2/manual/userconf">2.2</option><option value="/ocsigenserver/2.1/manual/userconf">2.1</option><option value="/ocsigenserver/1.3.4/manual/userconf">1.3.4</option><option value="/ocsigenserver/1.2.2/manual/userconf">1.2.2</option><option value="/ocsigenserver/1.1.0/manual/userconf">1.1.0</option></select><form id="search"><input name="q" id="q" placeholder="search ..."/><button>Search</button></form><nav class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="/ocsigenserver/2.7/manual/quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="/ocsigenserver/2.7/manual/launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="/ocsigenserver/2.7/manual/config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="/ocsigenserver/2.7/manual/misc" class="ocsimore_phrasing_link">Misc</a></h3><h2>Extensions</h2><h3><a href="/ocsigenserver/2.7/manual/staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="/ocsigenserver/2.7/manual/eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="/ocsigenserver/2.7/manual/extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="/ocsigenserver/2.7/manual/accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="/ocsigenserver/2.7/manual/authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="/ocsigenserver/2.7/manual/cgimod" class="ocsimore_phrasing_link">CGImod</a></h3><h3><a href="/ocsigenserver/2.7/manual/deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="/ocsigenserver/2.7/manual/redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="/ocsigenserver/2.7/manual/revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="/ocsigenserver/2.7/manual/rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="/ocsigenserver/2.7/manual/outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="/ocsigenserver/2.7/manual/userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="/ocsigenserver/2.7/manual/comet" class="ocsimore_phrasing_link">Comet</a></h3><h3><a href="/ocsigenserver/2.7/manual/cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3>Developing with the Ocsigen framework</h3><h4><a href="/ocsigenserver/2.7/manual/lwtoc" class="ocsimore_phrasing_link">Cooperative threads</a></h4><h4><a href="/ocsigenserver/2.7/manual/staticlink" class="ocsimore_phrasing_link">Static linking of the Ocsigen server</a></h4><h3><a href="/ocsigenserver/2.7/manual/extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h3><a href="/ocsigenserver/2.7/manual/libraries" class="ocsimore_phrasing_link">Libraries</a></h3><h3><a href="/ocsigenserver/2.7/manual/wrapping" class="ocsimore_phrasing_link">specific wrapping</a></h3><h1>Ocsigen server - API reference</h1><h2>Persistent data, writing in the logs, configuration file extension, polymorphic tables</h2><h3><a href="/ocsigenserver/2.7/api/Ocsigen_lib" class="ocsimore_phrasing_link">Ocsigen_lib</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h3><h3><a href="/ocsigenserver/2.7/api/Polytables" class="ocsimore_phrasing_link">Polytables</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_cache" class="ocsimore_phrasing_link">Ocsigen_cache</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsipersist" class="ocsimore_phrasing_link">Ocsipersist</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_config" class="ocsimore_phrasing_link">Ocsigen_config</a></h3><h2>Extending Ocsigen Server</h2><h3><a href="/ocsigenserver/2.7/api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_local_files" class="ocsimore_phrasing_link">Ocsigen_local_files</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_headers" class="ocsimore_phrasing_link">Ocsigen_headers</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_senders" class="ocsimore_phrasing_link">Ocsigen_senders</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_http_frame" class="ocsimore_phrasing_link">Ocsigen_http_frame</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_http_client" class="ocsimore_phrasing_link">Ocsigen_http_client</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_http_com" class="ocsimore_phrasing_link">Ocsigen_http_com</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_stream" class="ocsimore_phrasing_link">Ocsigen_stream</a></h3><h3><a href="/ocsigenserver/2.7/api/Ocsigen_comet" class="ocsimore_phrasing_link">Ocsigen_comet</a></h3><h3><a href="/ocsigenserver/2.7/api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h2>Indexes</h2><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_types">Index of types</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_values">Index of values</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_methods">Index of class methods</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_classes">Index of classes</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_modules">Index of modules</a></span></h3><h3> <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/api/index_module_types">Index of module types</a></span></h3></nav></nav><article class="rightcol"><h1>Userconf</h1><p>Userconf allows users to have their own configuration files. It is in beta version, and requires some cooperation
from other extensions to disallow unsafe options (for example, in version 1.2 it is not possible to have Eliom sites for users).
</p><h2> Configuration </h2><p>To use this extension, first load it from the configuration file:
</p><pre>&lt;extension findlib-package=&quot;ocsigenserver.ext.userconf&quot;/&gt;
</pre><p>Then, if you want to allow users to have their own configuration files, put in your hosts something like the lines
below. (Unless you understand Userconf well, you probably just want to use those lines as is.)
</p><pre>&lt;redirect regexp=&quot;(https?://[^/]*)/~([^/]*)&quot; dest=&quot;\1/~\2/&quot; /&gt;
&lt;userconf regexp=&quot;~([^/]*)/(.*)&quot; conf=&quot;$u(\1)/.ocsigen&quot; prefix=&quot;~\1&quot; url=&quot;\2&quot; localpath=&quot;$u(\1)/public_html&quot; /&gt;
</pre><p>The configuration file specified in <span class="teletype">conf</span> will be parsed for each request matching the regular expression
<span class="teletype">regexp</span>. Here, as in staticmod, <span class="teletype">$u(toto)</span> is the Unix home directory of user <span class="teletype">toto</span>. Extensions inside
the user configuration file will behave as though executed in a <span class="teletype">&lt;site&gt;</span> tag of root <span class="teletype">prefix</span>, while
<span class="teletype">url</span> is used to match the remainder of the url (the path <span class="teletype">prefix/url</span> must be equal to <span class="teletype">regexp</span>).
Finally, the option <span class="teletype">localpath</span> is used to specify the files the user is allowed to send: in userconf mode,
all the paths used in <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.7/manual/staticmod">Staticmod </a></span> must be relative, and are appended after the evaluation of
<span class="teletype">localpath</span>.
</p><p>The syntax of user configuration files is usually the same as the one of the part between <span class="teletype">&lt;host&gt;</span> and <span class="teletype">&lt;/host&gt;</span> in the main configuration file. However, the extensions can choose to disallow some options that are unsafe in user mode,
or forbid user mode entirely. See their individual documentation for details.
</p></article></div></div></body></html>
